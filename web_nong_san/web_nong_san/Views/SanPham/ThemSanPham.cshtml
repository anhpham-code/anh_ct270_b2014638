@model web_nong_san.SANPHAM
@{
    ViewBag.Title = "Thêm Sản Phẩm";
    Layout = null;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
    <header class="bg-dark text-white text-center py-3">
        <h1>Thêm Sản Phẩm</h1>
    </header>
    <p class="container mt-4">
        @Html.ActionLink("Về", "DanhSachSanPham", "SanPham", null, new { @class = "btn btn-primary" })       
    </p>
    @using (Html.BeginForm("ThemSanPham", "SanPham", FormMethod.Post, new { enctype = "multipart/form-data", @class = "needs-validation", @id = "myForm" }))
    {
        @Html.AntiForgeryToken()

        <div class="container mt-4">
            <div class="mb-3">
                <label for="TENSP" class="form-label">Tên Sản Phẩm</label>
                <div class="input-group">
                    <input type="text" id="TENSP" name="TENSP" class="form-control" required />
                </div>
            </div>


            <div class="mb-3">
                <label for="MACODE" class="form-label">Mã Code</label>
                <div class="input-group">
                    <input type="text" id="MACODE" name="MACODE" class="form-control" required />
                </div>
            </div>
            <div class="mb-3">
                <label for="URL" class="form-label">URL</label>
                <div class="input-group ">
                    <input type="text" id="URL" name="URL" class="form-control"/>
                </div>
            </div>

            <div class="mb-3">
                <label for="GIA" class="form-label">Giá</label>
                <div class="input-group">
                    <input type="number" id="GIA" name="GIA" class="form-control" required />
                </div>
            </div>
            <div class="mb-3">
                <label for="SOLUONGTON" class="form-label">Số lượng</label>
                <div class="input-group">
                    <input type="number" id="SOLUONGTON" name="SOLUONGTON" class="form-control" required />
                </div>
            </div>
            <div class="mb-3">
                <label class="form-label">Bán chạy</label>
                <br />
                <div class="form-check form-check-inline">
                    @Html.RadioButtonFor(model => model.BANCHAY, 1, new { @class = "form-check-input", id = "banchay-no" })
                    <label class="form-check-label" for="banchay-yes">Có</label>
                </div>
                <div class="form-check form-check-inline">
                    @Html.RadioButtonFor(model => model.BANCHAY, 0, new { @class = "form-check-input", id = "banchay-no" })
                    <label class="form-check-label" for="banchay-no">Không</label>
                </div>
            </div>
            <div class="mb-3">
                <label class="form-label">Ẩn hiện</label>
                <br />
                <div class="form-check form-check-inline">
                    @Html.RadioButtonFor(model => model.ANHIEN, 1, new { @class = "form-check-input", id = "banchay-yes" })
                    <label class="form-check-label" for="banchay-yes">Ẩn</label>
                </div>
                <div class="form-check form-check-inline">
                    @Html.RadioButtonFor(model => model.ANHIEN, 0, new { @class = "form-check-input", id = "banchay-no" })
                    <label class="form-check-label" for="banchay-no">Hiện</label>
                </div>
            </div>
            <div class="mb-3">
                <label for="NGAYNHAP" class="form-label">Ngày Nhập</label>
                <input type="date" class="form-control" id="NGAYNHAP" name="NGAYNHAP" required>
                <div class="invalid-feedback">Vui lòng chọn ngày nhập.</div>
            </div>

            <div class="mb-3">
                <label for="MOTANGAN" class="form-label">Mô tả ngắn</label>
                <div class="input-group">
                    <input type="text" id="MOTANGAN" name="MOTANGAN" class="form-control" required />
                </div>
            </div>
            <div class="mb-3">
                <label for="MOTA" class="form-label">Mô tả</label>
                <div class="input-group">
                    <input type="text" id="MOTA" name="MOTA" class="form-control" required />
                </div>
            </div>
            <div class="mb-3">
                <label for="MAHSX" class="form-label">Mã Sản Xuất</label>
                @Html.DropDownList("MAHSX", (IEnumerable<SelectListItem>)ViewBag.MAHSXList, "Chọn Mã Sản Xuất", new { @class = "form-control", required = "required" })
            </div>
            <div class="mb-3">
                <label for="MALOAI" class="form-label">Mã Loại</label>
                @Html.DropDownList("MALOAI", (IEnumerable<SelectListItem>)ViewBag.MALOAIList, "Chọn Mã Loại", new { @class = "form-control", required = "required" })
            </div>
            <div class="mb-3">
                <label for="MAGIAMGIA" class="form-label">Mã Giảm Giá</label>
                @Html.DropDownList("MAGIAMGIA", (IEnumerable<SelectListItem>)ViewBag.MAGIAMGIAList, "Chọn Mã Giảm Giá", new { @class = "form-control", required = "required" })
            </div>
            <div class="mb-3">
                <label for="HINH" class="form-label">Hình ảnh</label>
                <div class="custom-file">
                    <input type="file" class="custom-file-input" id="HINH" name="HINH" required>
                    <div class="invalid-feedback">Vui lòng chọn hình ảnh.</div>
                </div>
            </div>

            <div class="mb-3">
                <button type="submit" class="btn btn-primary">Thêm</button>
            </div>
        </div>
    }
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script>
        $(document).ready(function () {
            // Hàm kiểm tra và hiển thị lỗi
            function validateForm() {
                var isValid = true;

                // Kiểm tra Mã Code
                var macode = $("#MACODE").val();
                if (macode === "") {
                    $("#MACODE").addClass("is-invalid");
                    isValid = false;
                } else {
                    $("#MACODE").removeClass("is-invalid").addClass("is-valid");
                }

                // Validate TENSP
                var tensp = $("#TENSP").val();
                if (tensp === "") {
                    $("#TENSP").addClass("is-invalid");
                    isValid = false;
                } else {
                    $("#TENSP").removeClass("is-invalid").addClass("is-valid");
                }

                // Validate URL
                var url = $("#URL").val();
                if (url === "") {
                    $("#URL").addClass("is-invalid");
                    isValid = false;
                } else {
                    $("#URL").removeClass("is-invalid").addClass("is-valid");
                }

                // Validate GIA
                var gia = $("#GIA").val();
                if (gia === "") {
                    $("#GIA").addClass("is-invalid");
                    isValid = false;
                } else {
                    $("#GIA").removeClass("is-invalid").addClass("is-valid");
                }

                // Validate MAGIAMGIA
                var magiamgia = $("#MAGIAMGIA").val();
                if (magiamgia === "") {
                    $("#MAGIAMGIA").addClass("is-invalid");
                    isValid = false;
                } else {
                    $("#MAGIAMGIA").removeClass("is-invalid").addClass("is-valid");
                }

                // Validate HINH
                var hinh = $("#HINH").val();
                if (hinh === "") {
                    $("#HINH").addClass("is-invalid");
                    isValid = false;
                } else {
                    $("#HINH").removeClass("is-invalid").addClass("is-valid");
                }

                // Validate SOLUONGTON
                var soluongton = $("#SOLUONGTON").val();
                if (soluongton === "") {
                    $("#SOLUONGTON").addClass("is-invalid");
                    isValid = false;
                } else {
                    $("#SOLUONGTON").removeClass("is-invalid").addClass("is-valid");
                }

                // Validate NGAYNHAP
                var ngaynhap = $("#NGAYNHAP").val();
                if (ngaynhap === "") {
                    $("#NGAYNHAP").addClass("is-invalid");
                    isValid = false;
                } else {
                    $("#NGAYNHAP").removeClass("is-invalid").addClass("is-valid");
                }

                // Validate BANCHAY
                var banchay = $("#BANCHAY").val();
                if (banchay === "") {
                    $("#BANCHAY").addClass("is-invalid");
                    isValid = false;
                } else {
                    $("#BANCHAY").removeClass("is-invalid").addClass("is-valid");
                }

                // Validate MOTANGAN
                var motangan = $("#MOTANGAN").val();
                if (motangan === "") {
                    $("#MOTANGAN").addClass("is-invalid");
                    isValid = false;
                } else {
                    $("#MOTANGAN").removeClass("is-invalid").addClass("is-valid");
                }

                // Validate MOTA
                var mota = $("#ANHIEN").val();
                if (mota === "") {
                    $("#ANHIEN").addClass("is-invalid");
                    isValid = false;
                } else {
                    $("#ANHIEN").removeClass("is-invalid").addClass("is-valid");
                }

                // Validate ANHIEN
                var anhien = $("#ANHIEN").val();
                if (anhien === "") {
                    $("#ANHIEN").addClass("is-invalid");
                    isValid = false;
                } else {
                    $("#ANHIEN").removeClass("is-invalid").addClass("is-valid");
                }

                // Validate MAHSX
                var mahsx = $("#MAHSX").val();
                if (mahsx === "") {
                    $("#MAHSX").addClass("is-invalid");
                    isValid = false;
                } else {
                    $("#MAHSX").removeClass("is-invalid").addClass("is-valid");
                }

                // Validate MALOAI
                var maloai = $("#MALOAI").val();
                if (maloai === "") {
                    $("#MALOAI").addClass("is-invalid");
                    isValid = false;
                } else {
                    $("#MALOAI").removeClass("is-invalid").addClass("is-valid");
                }

                return isValid;
            }

            $("#myForm").submit(function (event) {
                if (!validateForm()) {
                    event.preventDefault(); // Ngăn chặn biểu mẫu từ việc nộp
                }
            });

            // Thêm sự kiện nghe để xóa phản hồi kiểm tra khi người dùng thay đổi giá trị
            $("#MACODE, #TENSP, #URL, #GIA, #SOLUONGTON, #HINH, #NGAYNHAP, #BANCHAY, #MOTANGAN, #MOTA, #ANHIEN, #MAHSX, #MALOAI")
                .change(function () {
                    $(this).removeClass("is-invalid is-valid");
                });
        });
    </script>

</body>
</html>
